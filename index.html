<!DOCTYPE html>
<html>
<body>
<canvas id="canvas" width="600" height="400"></canvas>
<canvas id="canvas2" width="600" height="400"></canvas>
<script>
(function() {
    var canvas = document.getElementById('canvas');
    var context = canvas.getContext('2d');

    var image1 = new Image();
    image1.src = 'a.bmp';
    image1.addEventListener('load', function() {
        context.drawImage(image1, 0, 0, 80, 80);
    }, false);

    var image2 = new Image();
    image2.src = 'b.bmp';
    image2.addEventListener('load', function() {
        context.drawImage(image2, 80, 0, 80, 80);
    }, false);

})();

(function() {
    var canvas2 = document.getElementById('canvas2');
    var context2 = canvas2.getContext('2d');

    var srcs = [
        'a.bmp',
        'b.bmp',
        'd.bmp',
    ];
    var images = [];
    for (var i in srcs) {
        images[i] = new Image();
        images[i].src = srcs[i];
    }

    var loadedCount = 1;
    for (var i in images) {
        images[i].addEventListener('load', function() {
            if (loadedCount == images.length) {
                var x = 0;
                var y = 0;
                for (var j in images) {
                    context2.drawImage(images[j], x, y, 150, 100);
                    x += 50;
                    y += 70;
                }
            }
            loadedCount++;
        }, false);
    }
})();
</script>

<h1>Hello World</h1>
</body>
<tml>